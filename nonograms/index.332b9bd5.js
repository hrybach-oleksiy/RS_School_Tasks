(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:String(n)}(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})({});var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div",r=document.createElement(n);return r.classList.add(t),r.textContent=e,r}}],null&&e(n.prototype,null),r&&e(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),o=[[1,0,0,0,1],[1,1,0,1,1],[1,0,1,0,1],[1,0,0,0,1],[1,0,0,0,1]];function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:String(e)}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.puzzleArray=new Array(e).fill().map((function(){return new Array(e).fill(0)})),this.puzzleTemplate=o,this.cols=new Array(e).fill().map((function(){return[0]})),this.rows=new Array(e).fill().map((function(){return[0]})),this.puzzleCols=new Array(e).fill().map((function(){return[0]})),this.puzzleRows=new Array(e).fill().map((function(){return[0]})),console.log(this.puzzleTemplate),this.clearField(),this.setField(this.puzzleTemplate,this.puzzleRows,this.puzzleCols)}var e,n;return e=t,(n=[{key:"clearField",value:function(){var t=this.rows.length;this.cols=new Array(t).fill().map((function(){return[0]})),this.rows=new Array(t).fill().map((function(){return[0]}))}},{key:"setField",value:function(t,e,n){for(var r=0;r<t.length;r++)for(var o=0;o<t.length;o++)t[r][o]?(n[o][n[o].length-1]++,e[r][e[r].length-1]++):(n[o][n[o].length-1]&&n[o].push(0),e[r][e[r].length-1]&&e[r].push(0));var i,l=a(n);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.length>1&&!u[u.length-1]&&u.splice(-1,1)}}catch(t){l.e(t)}finally{l.f()}var c,s=a(e);try{for(s.s();!(c=s.n()).done;){var f=c.value;f.length>1&&!f[f.length-1]&&f.splice(-1,1)}}catch(t){s.e(t)}finally{s.f()}}},{key:"toggleCellState",value:function(t,e){this.puzzleArray[t][e]=this.puzzleArray[t][e]?0:1,this.clearField(),this.setField(this.puzzleArray,this.rows,this.cols)}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:String(e)}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modalElement=null,this.isOpen=!1,this.closeButton=null,this.gameHandler=e,this.initModal()}var e,n;return e=t,(n=[{key:"initModal",value:function(){var t=this;this.modalElement=r.create("modal"),this.modalElement.classList.add("hidden"),this.modalElement.innerHTML='\n        <div class="modal__content">\n          <div class="modal__text">\n            <h3 class="modal__title">Great! You have solved the nonogram!</h3>\n          </div>\n        <button class="btn play">Play Again</button>\n        </div>\n    ',this.closeButton=this.modalElement.querySelector(".play"),this.closeButton.addEventListener("click",(function(){t.close(),t.gameHandler.showInitPage()})),document.querySelector(".game").append(this.modalElement)}},{key:"open",value:function(){this.isOpen||(this.modalElement.classList.remove("hidden"),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.modalElement.classList.add("hidden"),this.isOpen=!1)}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:String(e)}var v=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=document.querySelector(".game");o.innerHTML="",this.board=e,this.boardCols=e.puzzleCols,this.boardRows=e.puzzleRows,this.gameHandler=n,this.boardElement=r.create("board"),this.modal=new d(n),this.setBoard(o)}var e,n;return e=t,(n=[{key:"setBoard",value:function(t){for(var e=this,n=0;n<=this.board.puzzleArray.length;n++){var o=document.createElement("div");o.classList.add("row"),n%5==0?o.classList.add("divider-bottom"):o.classList.add("border-regular--bottom");for(var i=function(){var t=document.createElement("div");a%5==0?t.classList.add("divider-right"):t.classList.add("border-regular--right"),0===n&&0===a?t.classList.add("cell"):0===a?(t.classList.add("cell","header-row-cell"),e.boardRows[n-1].forEach((function(e){t.textContent+=e+","})),t.textContent=t.textContent.slice(0,-1)):0==n?(t.classList.add("cell","header-column-cell"),e.boardCols[a-1].forEach((function(e){t.textContent+=e+"\n"}))):(t.classList.add("cell","game-cell"),t.dataset.indexes="".concat(n-1,"-").concat(a-1),t.addEventListener("click",(function(t){if(!e.checkWin()){var n=t.target.dataset.indexes.split("-");e.board.toggleCellState(n[0],n[1]),t.target.classList.toggle("clicked")}e.checkWin()&&e.modal.open()}))),o.append(t)},a=0;a<=this.board.puzzleArray.length;a++)i();this.boardElement.append(o)}t.append(this.boardElement);var l=r.create("btn","Restart");l.addEventListener("click",(function(){return e.gameHandler.showInitPage()})),t.append(l)}},{key:"checkWin",value:function(){var t=this,e=!0;return this.board.cols.forEach((function(n,r){n.length===t.boardCols[r].length?n.forEach((function(n,o){n!=t.boardCols[r][o]&&(e=!1)})):e=!1})),this.board.rows.forEach((function(n,r){n.length===t.boardRows[r].length?n.forEach((function(n,o){n!=t.boardRows[r][o]&&(e=!1)})):e=!1})),e}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function S(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function E(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:String(e)}var z=S((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=new s(e),new v(this.board,n)}));function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:String(e)}new(function(){function t(){A(this,t);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];this.sizes=n,this.rootElement=r.create("game"),document.body.append(this.rootElement),this.showInitPage()}var e,n;return e=t,(n=[{key:"showInitPage",value:function(){var t=this,e=document.querySelector(".game");e.innerHTML="";var n,o=r.create("title","Nonogram Puzzle","h1"),i=r.create("menu-choose","Choose the difficulty","p"),a=r.create("menu","","ul"),l=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.sizes);try{var u=function(){var e=n.value,o=r.create("menu-item","","li");o.innerHTML="".concat(e," &times ").concat(e),o.addEventListener("click",(function(){return t.startGame(e,t)})),a.append(o)};for(l.s();!(n=l.n()).done;)u()}catch(t){l.e(t)}finally{l.f()}e.append(o,i,a)}},{key:"startGame",value:function(t,e){new z(t,e)}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())(5)})();