(()=>{"use strict";var e={385:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},875:(e,t,s)=>{e.exports=s.p+"images/favicon-32x32.ed0873eb.png"}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.m=e,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),s.b=document.baseURI||self.location.href;var n={};(()=>{s.r(n);var e,t,o,r,a,i=s(385),l=s.n(i),c=new URL(s(875),s.b);l()(c);class u{constructor({tag:e="div",classNames:t=[],text:s=""},...n){this.children=[];const o=document.createElement(e);o.classList.add(...t),o.textContent=s,this.node=o,n&&this.appendChildren(n)}append(e){this.children.push(e),this.node.append(e.getNode())}appendChildren(e){e.forEach((e=>{this.append(e)}))}getNode(){return this.node}getChildren(){return this.children}setTextContent(e){this.node.textContent=e}setAttribute(e,t){this.node.setAttribute(e,t)}setAttributes(e){Object.keys(e).forEach((t=>{this.node.setAttribute(t,e[t])}))}getAttribute(e){return this.node.getAttribute(e)}removeAttribute(e){this.node.removeAttribute(e)}addClass(e){this.node.classList.add(e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e){this.node.classList.toggle(e)}addListener(e,t,s=!1){this.node.addEventListener(e,t,s)}removeListener(e,t,s=!1){this.node.removeEventListener(e,t,s)}destroyChildren(){this.children.forEach((e=>{e.destroy()})),this.children.length=0}destroy(){this.destroyChildren(),this.node.remove()}}!function(e){e.GARAGE="garage",e.ENGINE="engine",e.WINNERS="winners"}(e||(e={})),function(e){e.GET="GET",e.DELETE="DELETE",e.PUT="PUT",e.POST="POST",e.PATCH="PATCH"}(t||(t={})),function(e){e.PLACEHOLDER="placeholder",e.TYPE="type",e.NAME="name",e.ID="id",e.FOR="for",e.REQUIRED="required",e.ACTION="action",e.DISABLED="disabled",e.CHECKED="checked",e.VALUE="value",e.SELECTED="selected"}(o||(o={})),function(e){e.SRC="src",e.ALT="alt"}(r||(r={})),function(e){e.HREF="href",e.TARGET="target"}(a||(a={}));class d extends u{constructor({classNames:e,id:t,type:s="text",name:n,placeholder:r,required:a,checked:i,onChange:l}){super({tag:"input",classNames:e}),this.setAttribute(o.ID,t),this.setAttribute(o.TYPE,s),this.setAttribute(o.NAME,n),r&&this.setAttribute(o.PLACEHOLDER,r),i&&this.setAttribute(o.CHECKED,i),a&&this.setAttribute(o.REQUIRED,a),l&&(this.onChange=l,this.addListener("input",this.onChange))}destroy(){this.onChange&&(this.removeListener("input",this.onChange),super.destroy())}}class h extends u{constructor({classNames:e,text:t,onClick:s}){super({tag:"button",classNames:e,text:t}),s&&(this.onClick=s,this.addListener("click",this.onClick))}destroy(){this.onClick&&(this.removeListener("click",this.onClick),super.destroy())}}const m=(e,...t)=>new u({tag:"div",classNames:e},...t),p=(e,t,s,n,o,r,a)=>new d({classNames:e,id:t,name:s,type:n,placeholder:o,required:r,onChange:a}),g=(e,t)=>new u({tag:"label",classNames:e,text:t}),b=(e,t,s)=>new h({classNames:e,text:t,onClick:s}),E=e=>new u({tag:"img",classNames:e}),v=e=>new u({tag:"a",classNames:e});class L extends u{constructor(){super({tag:"header",classNames:["Header-module_header_uNX8Ji"]},new u({tag:"p",classNames:["Header-module_header-title_Ryd7lg"],text:"Fun Chat"})),this.setContent()}setContent(){const e=m(["Header-module_wrapper_xhbvNE"]),t=b(["btn","header-btn"],"First Button");t.addClass("Header-module_active_liiKt1");const s=b(["btn","header-btn","winner-btn"],"Second Button");e.appendChildren([t,s]),this.append(e)}}function f(e){if(null==e)throw new Error(`${e} is not defined`)}const A="LoginForm-module_text-field_uUXidG",w="LoginForm-module_label_dptREz",C="LoginForm-module_input_MFVMkd",y="LoginForm-module_valid_eOALK9",_="LoginForm-module_invalid_k5Jre_",N="LoginForm-module_hidden_XXOG1v",S="LoginForm-module_name-error_qtqGwP",T="LoginForm-module_surname-error_L0D28R";class F extends u{constructor(e){super({tag:"form",classNames:["LoginForm-module_form_pEvhld","form"]}),this.loginButton=b(["button","btn"],"Login"),this.isNameValid=!1,this.isSurnameValid=!1,this.router=e,this.setAttribute(o.ACTION,""),this.setForm(),this.addListener("submit",(e=>{e.preventDefault()}))}setForm(){const e=new u({tag:"h1",classNames:["form__title","title"],text:"Login"}),t=g([w],"Name"),s=g([w],"Surname"),n=m([S,N]),r=m([T,N]);this.nameInput=p([C,"name-input"],"name","name","Enter your Name","true"),this.surnameInput=p([C],"surname","surname","Enter your Surname","true"),t.setAttribute(o.FOR,"name"),s.setAttribute(o.FOR,"surname");const a=m([A],t,this.nameInput,n),i=m([A],s,this.surnameInput,r);this.appendChildren([e,a,i,this.loginButton])}toggleButtonState(){this.isNameValid&&this.isSurnameValid?this.loginButton.removeAttribute(o.DISABLED):this.loginButton.setAttribute(o.DISABLED,"true")}toggleInputState(e,t,s){t.classList.toggle(y,e),t.classList.toggle(_,!e),"name"===s&&(this.isNameValid=e),"surname"===s&&(this.isSurnameValid=e),0===t.value.length&&(t.classList.remove(y),t.classList.remove(_),"name"===s&&(this.isNameValid=!1),"surname"===s&&(this.isSurnameValid=!1)),this.toggleButtonState()}validateName(e){const t=e.target,s=F.validateForm(t,`.${S}`,3);this.toggleInputState(s,t,t.name)}validateSurname(e){const t=e.target,s=F.validateForm(t,`.${T}`,4);this.toggleInputState(s,t,t.name)}static isFirstLetterUppercase(e){return/^[A-Z]/.test(e)}static validateForm(e,t,s){const n=e.value,o=document.querySelector(t);if(f(o),""===n.trim())return F.hideErrorMessage(o),!1;if(!/^[A-Za-z-]+$/.test(n))return F.showErrorMessage(o,'Field only accept English alphabet letters and the hyphen (" - ") symbol'),!1;if(!F.isFirstLetterUppercase(n))return F.showErrorMessage(o,"First letter of the field must be in uppercase"),!1;if(n.length<s){const e=`Minimum length of the ${3===s?"first name":"surname"} is ${s} characters`;return F.showErrorMessage(o,e),!1}return F.hideErrorMessage(o),!0}static showErrorMessage(e,t){const s=e;e.classList.remove(N),s.textContent=t}static hideErrorMessage(e){const t=e;e.classList.add(N),t.textContent=""}saveFormData(){const e=this.nameInput?.getNode(),t=this.surnameInput?.getNode();f(e),f(t);const s={name:e.value,surname:t.value},n=JSON.stringify(s);localStorage.setItem("userData",n)}clearForm(){this.getNode().reset(),this.nameInput?.removeClass(y),this.surnameInput?.removeClass(y)}}class x extends u{constructor(e){super({tag:"div",classNames:["chat"],text:"Chat"}),this.router=e}}class R extends u{constructor(e){super({tag:"main",classNames:["Main-module_main_d2LaAM","container"]}),this.router=e,this.setPage()}setPage(){this.destroyChildren();const e=window.location.pathname,t=new F(this.router),s=new x(this.router),n="/login"===e?t:s;this.append(n)}}const I=s.p+"images/school-logo.ad178c0d.svg",k=s.p+"images/github-logo.1bc6258a.svg",D="Footer-module_link_IhM0Td",O="Footer-module_img_BHwJLh";class M extends u{constructor(){super({tag:"footer",classNames:["Footer-module_footer_lJrnFv"]}),this.setBlock()}setBlock(){const e=m(["Footer-module_copyright_U8o4L2"]),t=v([D]),s=v([D]),n=new u({tag:"span",classNames:["copy"],text:"Â© 2024, by Hrybach Oleksiy"}),o=E([O]),i=E([O]);t.setAttribute(a.HREF,"https://github.com/hrybach-oleksiy"),t.setAttribute(a.TARGET,"_blank"),s.setAttribute(a.HREF,"https://rs.school/js/"),s.setAttribute(a.TARGET,"_blank"),o.setAttribute(r.SRC,k),o.setAttribute(r.ALT,"GitHub Logo"),i.setAttribute(r.SRC,I),i.setAttribute(r.ALT,"RS School Logo"),t.append(o),s.append(i),e.appendChildren([t,s,n]),this.append(e)}}class P{constructor(e,t){this.routes=e,this.pathSegmentsToKeep=t,document.addEventListener("DOMContentLoaded",(()=>{console.log(window.location.pathname);const e=window.location.pathname.split("/").slice(this.pathSegmentsToKeep+1).join("/");console.log(e),this.navigate(e)}))}navigate(e){const t=window.location.pathname.split("/").slice(1,this.pathSegmentsToKeep+1).join("/");console.log(t);const s=e.split("/"),n=this.routes.find((e=>e.path===s[0]));void 0!==n?n.callback():console.log("There are now such page")}}(new class{constructor(){this.root=m(["app"]),this.pathSegmentsToKeep=1,document.body.append(this.root.getNode()),document.body.setAttribute("data-theme","light");const e=this.createRoutes();this.router=new P(e,this.pathSegmentsToKeep)}createLayout(){const e=new L,t=new R(this.router),s=new M;this.root.appendChildren([e,t,s])}createRoutes(){return[{path:"",callback:()=>new F(this.router)},{path:"chat",callback:()=>new x(this.router)},{path:"login",callback:()=>new F(this.router)}]}}).createLayout();const H=new WebSocket("ws://127.0.0.1:4000"),B=document.querySelector(".form");B&&B.addEventListener("submit",(function(e){e.preventDefault();const t=document.querySelector(".name-input");t.value&&(H.send(JSON.stringify({id:null,type:"USER_LOGIN",payload:{user:{login:"lalala",password:"bebebe"}}})),t.value=""),t.focus()})),H.addEventListener("message",(({data:e})=>{console.log(e)}))})()})();